[
["index.html", "Основы дистанционного зондирования и фотограмметрияя Программное обеспечение", " Основы дистанционного зондирования и фотограмметрияя Карпачевский А.М. 2021-03-30 Программное обеспечение Erdas Imagine QGIS Image Processor Google Earth "],
["georeference.html", "Раздел 1 Географическая привязка 1.1 Географическая привязка в QGIS", " Раздел 1 Географическая привязка 1.1 Географическая привязка в QGIS В начало справки ⇡ Для привязки данных дистанционного зондирования в QGIS можно использовать WMS-сервис с мозаикой спутниковых снимков. Для включения мозаики зайдите в меню Модули – Управление и установка модулей…. Впишите в строку поиска QuickMapServices. Установите модуль. Откроется окно модуля. В окне поиска геосервиса введите Google satelite. Нажмите Добавить. Добавьте в качестве слоя данных привязываемый снимок. Примечание: Если у вас такой панели не оказалось, это значит, что она отключена. Для включения панели щелкните правой кнопкой мыши по пустому месту на панели и найдите панель работы со слоями. Включите Панель инструментов работы с растровыми данными. На ней нажмите кнопку Привязка растров . Откроется окно привязки. Нажмите на кнопку Открыть растр , добавьте привязываемый растр. Щелчок левой кнопкой мыши по привязываемому изображению открое окно, куда будет предложено ввести координаты. Если вы для привязки хотите использовать референцное изображение, нажмите на кнопку С карты. Окно ввода координат Для настройки параметров трансформации нажмите на кнопку . Опорные точки можно сохранять и подгружать – для этого используйте соответствующие кнопки на панели. Для запуска процесса трансформации нажмите на кнопку После добавления трансформированного изображения в основное окно карты убедитесь в правильности проделанной операции, сравнивая его с подложкой из мозаики спутниковых снимков. Для этого удобно использовать инструмент шторки. Зайдите в Модули – Управление и установка модулей… и вбейте в поиск MapSwipe Tool. После этого появится панель шторки. Выберите слой, который будет активен в режиме шторки (будет находиться под шторкой) и нажмите на кнопку . Режим шторки для слоя Google Maps Карпачевский А.М. Основы дистанционного зондирования и фотограмметрия. М.: Географический факультет МГУ, 2021. "],
["photogrammetry.html", "Раздел 2 Фотограмметрия кадрового снимка 2.1 Искажения наклонного снимка 2.2 Внутреннее ориентирование снимка", " Раздел 2 Фотограмметрия кадрового снимка 2.1 Искажения наклонного снимка В начало справки ⇡ 2.2 Внутреннее ориентирование снимка В начало справки ⇡ Параметры внутреннего ориентирования снимка определяют систему координат снимка с началом в центре его проекции. Параметры внутреннего ориентирования \\(a_{0}, a_{1}, a_{2}, b_{0}, b_{1}, b_{2}\\) – параметры аффинного преобразования системы координат на основе измерений координатных меток. Карпачевский А.М. Основы дистанционного зондирования и фотограмметрия. М.: Географический факультет МГУ, 2021. "],
["stereo.html", "Раздел 3 Стереоизмерения 3.1 Установка программного обеспечения 3.2 Исходные данные 3.3 Создание проекта 3.4 Внутреннее ориентирование 3.5 Опорные точки 3.6 Внешнее ориентирование 3.7 Работа в стереокомпараторе", " Раздел 3 Стереоизмерения 3.1 Установка программного обеспечения В начало справки ⇡ Для практической работы вам понадобится открытая учебная фотограмметрическая программа E-foto. Информацию о ней можно найти на домашнем сайте (http://www.efoto.eng.uerj.br/), там же можно скачать себе дистрибутив программы. Для этого перейдите во вкладку DOWNLOAD – Latest Version. Страница для загрузки программы и данных Запустите скачанный пакет установщика и установите программу. 3.2 Исходные данные В начало справки ⇡ В качестве исходных данных мы будем использовать серию аэрофотоснимков с перекрытием на территорию окрестностей УНС Сатино, сделанную в 1970 году, а также сеть опорных точек и топографическую карту. Снимки Наземные опорные точки Топографическая карта масштаба 1:10 000 3.3 Создание проекта В начало справки ⇡ Запустите программу E-foto. В меню выберите Project – New. Укажите путь для сохранения файла проекта с расширением .epp. Откроется окно менеджера проекта. Слева приведена структура проекта, а по центру - содержание. В разделе Project Header вам нужно указать общую информацию о проекте. Для этого включите режим редактирования, нажав на кнопку Edit внизу страницы. Окно менеджера проекта Перейдите в раздел Terrain и укажите общую информацию о территории. Максимальная высота – 200 м. Минимальная высота – 133 м. Средняя высота – 167 м. Зона UTM – 37. Примерную широту и долготу центра территории укажите, используя программу Google Earth и точки фототриангуляции. Не забудьте указать правильные полушария. Перейдите в раздел Sensor и укажите общую информацию о съёмке. Сенсор – АФА-41/10. Тип – кадровый аналоговый снимок. Калиброванное фокусное расстояние аэрофотоаппарата – 96.78 мм. Координаты главной точки – x = 0.5, y = 0.4. Компенсированная радиальная дисторсия учтена при калибровке фокусного расстояния (исходно 100 мм). Некомпенсированная радиальная дисторсия +-25 мкм, что очень мало, поэтому мы ей можем пренебречь. Укажите координаты координатных меток снимков (Fiducial marks) в последней таблице. Координаты меток В разделе Flight мы можем указать примерную высоту съёмку – 1500 м, а также примерный масштаб снимков 1:14 000. В разделе images нужно загрузить аэрофотоснимки, указав их разрешение – 600 dpi. Вы можете после этого открыть раздел с каждым из загруженных снимков и увидеть информацию о нём. Параметры снимка внутри проекта В этом разделе нажмите на кнопку View Image для просмотра изображения. Если при открытии изображения возникла ошибка, то, скорее всего, у вас неправильно записались пути в файле проекта. Обратите внимание на снимок экрана выше – в строке пути должен быть указан путь, в строке имени файла - только его имя, а в строке ID снимка достаточно указать имя файла без расширения. Исправить это внутри программы нельзя, но, к счастью, файл проекта – это документ XML, который редактируется блокнотом. Найдите внутри него соответствующие теги и исправьте содержимое внутри них. Параметры снимка в формате XML 3.4 Внутреннее ориентирование В начало справки ⇡ Для выполнения внутреннего ориентирования снимков выберите пункт меню Execute – Interior Orientation. В открывшемся окне предлагается выбрать снимок для ориентирования. Необходимо последовательно выполнить эту операцию для всех снимков. Для масштабирования можно использовать инструмент лупы, который работает на выделяемую прямоугольную область. Для произвольного изменения масштаба в обе стороны нужно зажать колёсико мыши. Координатные метки рассматриваемых снимков расположены возле края середины каждой из сторон и представляют собой асимметричные кресты, которые по размеру больше, чем обычные регулярные кресты, идущие с шагом в 1 см. Координатная метка снимка Обратите внимание на порядок координатных меток – правая, левая, верхняя, нижняя. Вам нужно расставлять их в таком же порядке. Внизу окна приводится табличка, где выделена строка с активной на данной момент меткой. Как только вы метку установили, автоматически активной становится следующая метка в таблице. Если вам необходимо исправить положение координатной метки, то нужно выделить соответствующую строку в таблице и указать на снимке правильное положение метки. После расстановки меток нажмите на кнопку . В результате откроется окно отчёта внутреннего ориентирования с вектором параметров аффинного преобразования системы координат камеры и матрицей вариации-ковариации. Если точность операции удовлетворительная, то будет активна кнопка Accept, нажав которую, мы сохраняем параметры. После этого нажмите на кнопку Done , что вернёт вас в основное окно проекта. Отчёт внутреннего ориентирования Аналогично операция проделывается для всех снимков. 3.5 Опорные точки В начало справки ⇡ Поскольку параметры внешнего ориентирования нам заранее неизвестны, то их необходимо рассчитать на основе обратной фотограмметрической засечки. Для обратной засечки нам потребуются опорные точки с известными координатами и высотами. Откройте в программе Google Earth Pro файл KML с точками фототриангуляции. Для просмотра нам потребуется снимок QuickBird за 20 апреля 2006 года (как самый хронологически близкий к 1970), который можно включить кнопкой . Опорные точки на снимке QuickBird за 20 апреля 2006 года Следует иметь в виду, что координаты этих точек достаточно точно уравнены между собой, но снимок сам по себе может быть аффинно сдвинут на некую постоянную величину. Нам необходимо получить координаты этих точек в проекции UTM. Для переключения показа координат в UTM зайдите в меню Инструменты – Настройки и выберите соответствующий пункт в разделе Показывать шир/долг. Настройки показа координат Теперь, если вы правой кнопкой мыши щёлкните по опорной точке и из меню выберите Свойства, перед вами откроется окно с координатами восточного и северного склонения для точки. Для добавления опорных точек в программе E-foto в меню проекта перейдите в раздел Points и нажмите на кнопку New. В открывшемся окне задайте имя опорной точки, впишите координаты её координаты из Google Earth. Высоту точки возьмите с топографической карты, зная, что сечение основных горизонталей 2 метра. Для плановых координат указывается стандартное отклонение 3 метра (это худшее возможное значение согласно некоторым исследованиям [1, 2]). Для высот укажите СКО в 2 метра. Опорная точка Описание точки на АФС p1 Северо-восточный угол сельского клуба в Сатино p2 Северо-западный угол сатинскогохрамамагазина p3 Северо-западный угол пруда в Ивановском p4 Угол леса в районе Бутовского холма p10 Северо-восточный угол забора садов в Рыжково p11 Юго-восточный угол пристройки коровника в Загрязье p12 Юго-западный угол коровника в Ивановском p13 Внутренний угол забора садового участка в Сатино p14 Юго-восточный угол залежной полосы на склоне южнее урочища Вторые Столбцы p15 Северный угол островка леса на Дедюевском холма, соответствующий краю развилки дорог p16 Одиноко стоящее дерево в верховьях Антоновской балки p17 Юго-восточный угол пруда в Медвежьем болоте p18 Западный угол пожарного пруда в Рыжковской излучине p19 Поворот дороги вдоль юго-восточного угла леса p20 Северо-западный угол храма в Беницах Внесите информацию об опорных точках и сохраните проект. 3.6 Внешнее ориентирование В начало справки ⇡ Для внешнего ориентирования с помощью обратной фотограмметрической засечки в меню выберите пункт Execute – Spatial Resection. Аналогично внутреннему ориентированию откроется окно с выбором снимка. Далее откроется снимок с таблицей опорных точек внизу. Аналогично расстановке координатных меток установите опорные точки на снимке с помощью кнопки Measure . Пропускайте те точки, которые отсутствуют на данном снимке. Для исключения опорной точки из засечки нажмите на крестик . После расстановки всех опорных точек на снимке нажмите на , согласитесь со всеми параметрами точности, после чего перед вами откроется отчёт об уравнивании с параметрами внешнего ориентирования и матрицей вариации-ковариации. Окно отчёта уравнивания параметров внешнего ориентирования Обратите внимание, что значение координаты Z должно быть около 1600 м, значения углов должны быть маленькими. Если параметры точности в матрице достаточны, то вы сможете нажать на кнопку Accept – параметры внешнего ориентирования будут сохранены. После этого нажмите на кнопку Done , что вернёт вас в основное окно проекта. Проделайте аналогичные операции для остальных снимков. 3.7 Работа в стереокомпараторе В начало справки ⇡ В меню проекта выберите пункт Execute – Stereo Plotter. Откроется окно с анаглифными изображением стереопары снимков. Для эффективной работы с анаглифами рекомендуется использовать специальные очки. Окно стереокомпаратора Если изображение в анаглифических очках двоится, зажмите SHIFT и подвиньте изображение до тех пор, пока рассматриваемый участок не сольётся в объёмное изображение. Для измерения высоты в точке нужно добавить точку с помощью кнопки , далее выбрать кнопку . При устранённых параллаксах (восстановленной стереомодели на данную территорию) с помощью колеса мыши нужно посадить марку на измеряемый объект. На увеличенных фрагментах левого и правого изображения снизу будут показываться эти марки в «монокулярном» режиме. Как только мнимая марка слилась (реальные марки оказались на соответственных точках), нажмите левую кнопку мыши и в окне справа появятся измерения для данной точки. В случае, если вы замечаете поперечный параллакс, необходимо зажать CTRL и крутить колесо мыши до тех пор, пока поперечный параллакс не станет равен нулю. Результаты измерений можно экспортировать в виде текстового файла, нажав на кнопку . Карпачевский А.М. Основы дистанционного зондирования и фотограмметрия. М.: Географический факультет МГУ, 2021. "],
["dem.html", "Раздел 4 Получение ЦММ и ортотрансформация 4.1 Исходные данные 4.2 Построение ЦММ 4.3 Работа с высотными данными в QGIS 4.4 Построение производных поверхностей 4.5 Верификация ЦММ по точкам стереоизмерений 4.6 Ортотрансформация с использованием полученной ЦММ", " Раздел 4 Получение ЦММ и ортотрансформация 4.1 Исходные данные В начало справки ⇡ В качестве исходных данных в этой работе выступают ориентированные и привязанные снимки из предыдущей модели, а также полученная на их основе стереомодель в программе E-foto. 4.2 Построение ЦММ В начало справки ⇡ Выберите команду Execute – DSM Extraction. Откроется окно соответствующего модуля.Перейдите во вкладку Automatic Extraction. Настройки извлечения ЦММ Здесь можно выбрать тип радиометрической коррекции – для чёрно-белых снимков лучше всего выбрать Histogram matching. Для обработки стереопар и поиска тождественных точек в программе доступно два метода – кросс-корреляции (Cross-correlation) и наименьших квадратов (Least-Squares Matching). Проделайте сначала всё одним методом, затем попробуйте другой и сравните результат. Для ускорения процесса построения лучше задать параметр передискретизации (Image downsampling) 2 (размер пикселов уменьшиться в два раза). В окне Use pairs выберите ту стереопару, по которой нужно построить ЦММ. Нажмите на кнопку для запуска процесса. По окончании процесса откроется окно для просмотра найденных пикетов в виде жёлтых крестиков. После того, как пикеты были извлечены, необходимо их интерполировать. Для этого нажмите на соответствующую кнопку . После этого можно экспортировать полученный грид.Перейдите во вкладку Load/Save Options, выберите DSM extraction file format – облако точек без индексов, а Grid file format – ASCII DSM Grid. В разделе DSM Grid Interpolation внизу окна нажмите на сохранение и сохраните текстовый файл с высотными данными. 4.3 Работа с высотными данными в QGIS В начало справки ⇡ Добавьте в QGIS полученные ранее высотные данные как текст с разделителями. Обратите внимание, что необходимо правильно выбрать символ разделителя, указать количество строк заголовка файла, которые мы не учитываем, указать соответствующие поля для координат, а также правильную систему координат. Добавление ASCII-файла как текста с разделителями Добавленные данные необходимо сохранить либо в виде шейп-файла, либо в базе геоданных, щёлкнув правой кнопкой по слою Экспорт – сохранить как. Для получения растровой поверхности используйте инструмент Grid (Nearest Neighbor)…. Его можно найти через меню Raster – Analysis. Укажите поле для Z-значений в настройках инструмента. После настройки символики ваша ЦММ примет примерно следующий вид – очевидно, что в ней много пропущенных данных. Визуализация первичной ЦММ с пропусками данных Для заполнения пропусков воспользуйтесь инструментом Raster – Analysis – Fill nodata…. После этого ЦММ должна принять примерно следующий вид: Визуализация ЦММ с заполненными пропусками 4.4 Построение производных поверхностей В начало справки ⇡ В QGIS доступны многие инструменты для построения производных поверхностей от ЦМР и ЦММ, например: Углы наклона – Raster – Analysis – Slope…. Экспозиция склонов – Raster – Analysis – Aspect…. Аналитическая отмывка рельефа – Raster – Analysis – Hillshade…. Кроме того, мы можем извлечь изолинии (горизонтали) с помощью инструмента Raster – Extraction – Contour…. 4.5 Верификация ЦММ по точкам стереоизмерений В начало справки ⇡ Измерьте высоты с помощью стереокомпаратора в местах, где есть крупные пропуски данных в ЦММ. Полученные точки можно экспортировать в шейпфайл, нажав на кнопку . В открывшемся окне выберите формат сохранения SHP. Для извлечения значений высот ЦММ в точки используйте инструмент в QGIS Sample Raster Values. Этот инструмент записывает в виде атрибута значения ячеек растра, в которые попадают точки. Для расчёта собственных значений высот точек шейпфайла (полученные в результате стереоизмерений) можно зайти в калькулятор поле и написать выражение для нового атрибутивного поля _ z($geometry)_. 4.6 Ортотрансформация с использованием полученной ЦММ В начало справки ⇡ Для ортотрансформации снимков в E-foto требуется ЦММ в собственном формате, что обуславливает необходимость её коррекции (заполнения пропусков) внутренними средствами программы. Для этого в модуле DSM Extraction после извлечения ЦММ перейдите на вкладку Interpolation. В параметре Grid Interpolation method необходимо выбрать Moving average (обычно установлено по умолчанию). В параметре Distance укажите размер плавающего окна осреднения в пикселях, например, 10. настройки интерполяции Сохраните ЦММ в формате ASCII DSM Grid и выйдите из модуля. Запустите модуль ортотрансформации Execute – Ortho-Rectification. Окно модуля ортотрансформации Выберите изображение, которое необходимо ортотрансформировать, укажите формат ЦММ такой же, как вы указывали для её сохранения, укажите путь к файлу ЦММ. В качестве выходного формата для изображения укажите GeoTIFF. Для запуска процедуры нажмите . Ортотрансформированное изображение скорее всего сохранится без СК, но вы сможете её задать в QGIS. для сопоставления ортотрансформированного изображения с исходным можно воспользоваться инструментом Шторка. Сопоставление ортотрансформированного изображения с исходным Карпачевский А.М. Основы дистанционного зондирования и фотограмметрия. М.: Географический факультет МГУ, 2021. "]
]
