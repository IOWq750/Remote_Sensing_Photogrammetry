# Обработка сканерных космических изображений с помощью RPC {#rpc}


## Исходные данные {#rpc-initial}
[В начало справки ⇡](#rpc)


В качестве исходных данных можно использовать выложенные в открытый доступ сканерные изображения со спутника IKONOS. Данные, включая изображения, метаданные, коэффициенты рациональных полиномов, а также наземные опорные точки, можно скачать [со страницы](https://www.isprs.org/data/ikonos_hobart/default.aspx){target="_blank"}, либо [из облака](https://disk.yandex.ru/d/N2cDLX4j3GryPg){target="_blank"}.


## Подготовка данных {#rpc-prepare}
[В начало справки ⇡](#rpc)


Создайте новый проект PHOTOMOD. Укажите тип – **Космическая сканерная съёмка**, система координат – укажите соответствующую зону UTM. Создайте новый маршрут в блоке и добавьте туда два космических изображения стереопары. В окне редактора блока нажмите на кнопку добавления изображений. В открывшемся окне укажите путь к папке, где расположены изображения или папки с изображениями, выберите в автопоиске опцию **начиная с текущей папки** и нажмите на кнопку **Поиск**. Если программа найдёт файлы, они отразятся в виде строчек в добавляемых изображениях. Нажмите на кнопку **Добавить все**.


![Добавление данных в проект](images\Ref17\Adding_Imagery.png)


Если добавленные изображения получились чёрными, выполните их радиометрическую коррекцию, нажав на кнопку ![](images\Ref17\Radiometric_Correction.png) в окне редактора блока.

## Расстановка опорных точек {#rpc-gcp}
[В начало справки ⇡](#rpc)

Откройте окно каталога опорных точек **Ориентирование – Каталог опорных точек...**. Импортируйте опорные точки из файла **Selected_HobartGCPs114-UTM.csv**. Установите опорные точки на обоих снимках стереопары, дважды щёлкнув по каждой строчке и подвинув точки в положение маркера в верной позиции ![](images\Ref17\Move2Marker.png). Ниже приведены фрагменты изображения с правильным положением точек.

![Опорная точка B1_05_C](images\Ref17\B1_05_C.jpeg)

![Опорная точка B1_07](images\Ref17\B1_07.jpeg)

![Опорная точка B1_08](images\Ref17\B1_08.jpeg)

![Опорная точка B2_06](images\Ref17\B2_06.jpeg)

![Опорная точка B2_11](images\Ref17\B2_11.jpeg)

![Опорная точка B2_13](images\Ref17\B2_13.jpeg)

![Опорная точка B3_05](images\Ref17\B3_05.jpeg)

![Опорная точка B3_06](images\Ref17\B3_06.jpeg)

![Опорная точка B3_10](images\Ref17\B3_10.jpeg)

![Опорная точка B4_01](images\Ref17\B4_01.jpeg)

![Опорная точка B5_08](images\Ref17\B5_08.jpeg)

![Опорная точка B6_09](images\Ref17\B6_09.jpeg)

![Опорная точка B6_10](images\Ref17\B6_10.jpeg)

![Опорная точка B6_23](images\Ref17\B6_23.jpeg)

![Опорная точка B7_01](images\Ref17\B7_01.jpeg)

![Опорная точка B7_03](images\Ref17\B7_03.jpeg)

![Опорная точка B8_01](images\Ref17\B8_01.jpeg)

![Опорная точка B9_07](images\Ref17\B9_07.jpeg)

![Опорная точка B9_13](images\Ref17\B9_13.jpeg)

![Опорная точка B9_17](images\Ref17\B9_17.jpeg)

Для того чтобы оценить точность привязки снимка по RPC сделайте точки *B1_05_C*, *B2_11*, *B3_05*, *B5_08*, *B9_13* контрольными, выбрав их в таблице и нажав на кнопку **Сделать выбранные точки контрольными** ![](images\Ref17\Control.png). Оставшиеся точки нужно исключить, нажав на кнопку ![](images\Ref17\Excepted.png). Нажмите на кнопку **Применить**.

 
## Уравнивание блока {#rpc-adjustment}
[В начало справки ⇡](#rpc)


Вызовите меню **Ориентирование – Уравнивание блока**. На открывшейся панели нажмите на кнопку настроек уравнивания ![](images\Ref17\Adjustment.png). В окне настроек убедитесь, что метод уравнивания стоит **RPC**. В объединениях укажите **Не объединять** и поставьте галочку напротив опции **Создавать стереопары**.


![Настройки уравнивания блока](images\Ref17\Adjustment_Settings.png)

Запустите процесс уравнивания блока. Для получения отчёта об уравнивании нажмите на кнопку ![](images\Ref17\Adjustment_Report.png) на панели уравнивания. Откроется окно параметров отчёта.

![Настройки отчёта об уравнивании](images\Ref17\Report_Settings.png)

В открывшемся окне отчёта будет содержаться информация о точности уравнивания по контрольным точкам. Для совместного уравнивания по данным RPC и опорным точкам переведите ранее исключённые точки в категорию опорных.

## Ортотрансформация сканерного изображения по данным RPC и ЦМП в ArcGIS {#rpc-orthorectification}
[В начало справки ⇡](#rpc)

В ArcGIS доступен инструмент ортотрансформации сканерных изображений с RPC **Data Management Tools – Raster – Raster Processing – Create Ortho Corrected Raster Dataset**. В качестве цифровой модели поверхности можно использовать модель на основе стереопары сканерных изображений или (менее точно) какой-либо глобальный набор данных.

 
----
_Карпачевский А.М._ **Основы дистанционного зондирования и фотограмметрии**. М.: Географический факультет МГУ, `r lubridate::year(Sys.Date())`.
----